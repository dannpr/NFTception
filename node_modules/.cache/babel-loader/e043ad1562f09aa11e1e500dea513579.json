{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar decoder = require('./decoder.js');\n\nclass CarIteratorBase {\n  constructor(version, roots, iterable) {\n    this._version = version;\n    this._roots = roots;\n    this._iterable = iterable;\n    this._decoded = false;\n  }\n\n  get version() {\n    return this._version;\n  }\n\n  async getRoots() {\n    return this._roots;\n  }\n\n}\n\nclass CarBlockIterator extends CarIteratorBase {\n  [Symbol.asyncIterator]() {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once');\n    }\n\n    if (!this._iterable) {\n      throw new Error('Block iterable not found');\n    }\n\n    this._decoded = true;\n    return this._iterable[Symbol.asyncIterator]();\n  }\n\n  static async fromBytes(bytes) {\n    const {\n      version,\n      roots,\n      iterator\n    } = await fromBytes(bytes);\n    return new CarBlockIterator(version, roots, iterator);\n  }\n\n  static async fromIterable(asyncIterable) {\n    const {\n      version,\n      roots,\n      iterator\n    } = await fromIterable(asyncIterable);\n    return new CarBlockIterator(version, roots, iterator);\n  }\n\n}\n\nclass CarCIDIterator extends CarIteratorBase {\n  [Symbol.asyncIterator]() {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once');\n    }\n\n    if (!this._iterable) {\n      throw new Error('Block iterable not found');\n    }\n\n    this._decoded = true;\n\n    const iterable = this._iterable[Symbol.asyncIterator]();\n\n    return {\n      async next() {\n        const next = await iterable.next();\n\n        if (next.done) {\n          return next;\n        }\n\n        return {\n          done: false,\n          value: next.value.cid\n        };\n      }\n\n    };\n  }\n\n  static async fromBytes(bytes) {\n    const {\n      version,\n      roots,\n      iterator\n    } = await fromBytes(bytes);\n    return new CarCIDIterator(version, roots, iterator);\n  }\n\n  static async fromIterable(asyncIterable) {\n    const {\n      version,\n      roots,\n      iterator\n    } = await fromIterable(asyncIterable);\n    return new CarCIDIterator(version, roots, iterator);\n  }\n\n}\n\nasync function fromBytes(bytes) {\n  if (!(bytes instanceof Uint8Array)) {\n    throw new TypeError('fromBytes() requires a Uint8Array');\n  }\n\n  return decodeIterator(decoder.bytesReader(bytes));\n}\n\nasync function fromIterable(asyncIterable) {\n  if (!asyncIterable || !(typeof asyncIterable[Symbol.asyncIterator] === 'function')) {\n    throw new TypeError('fromIterable() requires an async iterable');\n  }\n\n  return decodeIterator(decoder.asyncIterableReader(asyncIterable));\n}\n\nasync function decodeIterator(reader) {\n  const decoder$1 = decoder.createDecoder(reader);\n  const {\n    version,\n    roots\n  } = await decoder$1.header();\n  return {\n    version,\n    roots,\n    iterator: decoder$1.blocks()\n  };\n}\n\nexports.CarBlockIterator = CarBlockIterator;\nexports.CarCIDIterator = CarCIDIterator;\nexports.CarIteratorBase = CarIteratorBase;","map":{"version":3,"sources":["/Users/macdann/Desktop/ethccHack-NFT/Solar-NFT/node_modules/@ipld/car/cjs/lib/iterator.js"],"names":["Object","defineProperty","exports","value","decoder","require","CarIteratorBase","constructor","version","roots","iterable","_version","_roots","_iterable","_decoded","getRoots","CarBlockIterator","Symbol","asyncIterator","Error","fromBytes","bytes","iterator","fromIterable","asyncIterable","CarCIDIterator","next","done","cid","Uint8Array","TypeError","decodeIterator","bytesReader","asyncIterableReader","reader","decoder$1","createDecoder","header","blocks"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar decoder = require('./decoder.js');\n\nclass CarIteratorBase {\n  constructor(version, roots, iterable) {\n    this._version = version;\n    this._roots = roots;\n    this._iterable = iterable;\n    this._decoded = false;\n  }\n  get version() {\n    return this._version;\n  }\n  async getRoots() {\n    return this._roots;\n  }\n}\nclass CarBlockIterator extends CarIteratorBase {\n  [Symbol.asyncIterator]() {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once');\n    }\n    if (!this._iterable) {\n      throw new Error('Block iterable not found');\n    }\n    this._decoded = true;\n    return this._iterable[Symbol.asyncIterator]();\n  }\n  static async fromBytes(bytes) {\n    const {version, roots, iterator} = await fromBytes(bytes);\n    return new CarBlockIterator(version, roots, iterator);\n  }\n  static async fromIterable(asyncIterable) {\n    const {version, roots, iterator} = await fromIterable(asyncIterable);\n    return new CarBlockIterator(version, roots, iterator);\n  }\n}\nclass CarCIDIterator extends CarIteratorBase {\n  [Symbol.asyncIterator]() {\n    if (this._decoded) {\n      throw new Error('Cannot decode more than once');\n    }\n    if (!this._iterable) {\n      throw new Error('Block iterable not found');\n    }\n    this._decoded = true;\n    const iterable = this._iterable[Symbol.asyncIterator]();\n    return {\n      async next() {\n        const next = await iterable.next();\n        if (next.done) {\n          return next;\n        }\n        return {\n          done: false,\n          value: next.value.cid\n        };\n      }\n    };\n  }\n  static async fromBytes(bytes) {\n    const {version, roots, iterator} = await fromBytes(bytes);\n    return new CarCIDIterator(version, roots, iterator);\n  }\n  static async fromIterable(asyncIterable) {\n    const {version, roots, iterator} = await fromIterable(asyncIterable);\n    return new CarCIDIterator(version, roots, iterator);\n  }\n}\nasync function fromBytes(bytes) {\n  if (!(bytes instanceof Uint8Array)) {\n    throw new TypeError('fromBytes() requires a Uint8Array');\n  }\n  return decodeIterator(decoder.bytesReader(bytes));\n}\nasync function fromIterable(asyncIterable) {\n  if (!asyncIterable || !(typeof asyncIterable[Symbol.asyncIterator] === 'function')) {\n    throw new TypeError('fromIterable() requires an async iterable');\n  }\n  return decodeIterator(decoder.asyncIterableReader(asyncIterable));\n}\nasync function decodeIterator(reader) {\n  const decoder$1 = decoder.createDecoder(reader);\n  const {version, roots} = await decoder$1.header();\n  return {\n    version,\n    roots,\n    iterator: decoder$1.blocks()\n  };\n}\n\nexports.CarBlockIterator = CarBlockIterator;\nexports.CarCIDIterator = CarCIDIterator;\nexports.CarIteratorBase = CarIteratorBase;\n"]},"metadata":{},"sourceType":"script"}